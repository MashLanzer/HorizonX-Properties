<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - HorizonX Properties</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Estilos específicos para el nuevo dashboard */
        body { background: var(--bg-secondary ); font-family: 'Inter', sans-serif; }
        .dashboard-container { max-width: 1400px; margin: 2rem auto; padding: 2rem; }
        #login-view { text-align: center; padding: 4rem 0; background: var(--bg-primary); border-radius: 15px; box-shadow: var(--shadow-lg); }
        #dashboard-view { display: none; }
        .login-btn { font-size: 1.2rem; padding: 1rem 2rem; background: #4285F4; color: white; border: none; border-radius: 8px; cursor: pointer; display: inline-flex; align-items: center; gap: 1rem; transition: background 0.3s; }
        .login-btn:hover { background: #357ae8; }

        /* Header del Dashboard */
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem; }
        .dashboard-header h1 { font-size: 2.5rem; color: var(--text-primary); }
        #logout-btn { font-size: 1rem; }

        /* Tarjetas de Métricas (KPIs) */
        .kpi-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .kpi-card { background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow-md); border-left: 5px solid var(--primary-color); }
        .kpi-card .card-title { font-size: 1rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .kpi-card .card-value { font-size: 2.5rem; font-weight: 700; color: var(--text-primary); }
        .kpi-card .card-icon { float: right; font-size: 2rem; color: var(--primary-color); opacity: 0.2; }

        /* Controles y Filtros */
        .controls-panel { background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow-md); margin-bottom: 2rem; display: flex; flex-wrap: wrap; gap: 1.5rem; align-items: center; }
        .filter-group { display: flex; flex-direction: column; gap: 0.5rem; }
        .filter-group label { font-size: 0.9rem; font-weight: 500; color: var(--text-secondary); }
        .filter-group input, .filter-group select { padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem; background: var(--bg-secondary); color: var(--text-primary); }
        #search-input { min-width: 300px; }
        .export-btn { margin-left: auto; }

        /* Tabla de Datos */
        .table-container { overflow-x: auto; background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow-md); }
        .submissions-table { width: 100%; border-collapse: collapse; }
        .submissions-table th, .submissions-table td { padding: 12px 15px; border-bottom: 1px solid var(--border-color); text-align: left; white-space: nowrap; }
        .submissions-table th { background-color: var(--bg-tertiary); font-weight: 600; }
        .submissions-table tr:hover { background-color: var(--bg-secondary); }
        .message-cell { white-space: normal; min-width: 250px; }

        /* Paginación */
        .pagination-controls { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1.5rem; }
        .pagination-controls button { padding: 0.5rem 1rem; }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Vista de Inicio de Sesión -->
        <div id="login-view">
            <h1 class="section-title">Panel de Administración</h1>
            <p style="margin-bottom: 2rem;">Inicia sesión con tu cuenta de Google de administrador.</p>
            <button id="login-btn" class="login-btn">
                <svg width="20" height="20" viewBox="0 0 18 18"><path fill="#fff" d="M17.64,9.2c0-0.6-0.05-1.18-0.15-1.74h-8.19v3.3h4.62c-0.2,1.08-0.84,2-1.74,2.64v2.16h2.79C16.74,13.98,17.64,11.7,17.64,9.2z"></path><path fill="#fff" d="M9.3,18c2.43,0,4.47-0.81,5.96-2.19l-2.79-2.16c-0.81,0.54-1.83,0.87-2.96,0.87c-2.25,0-4.14-1.53-4.83-3.57H1.5v2.25C3.03,16.02,5.94,18,9.3,18z"></path><path fill="#fff" d="M4.47,10.98c-0.12-0.36-0.18-0.75-0.18-1.14s0.06-0.78,0.18-1.14V6.45H1.5C0.54,8.22,0,10.26,0,12.42s0.54,4.2,1.5,5.97L4.47,15.03z"></path><path fill="#fff" d="M9.3,3.96c1.32,0,2.52,0.45,3.45,1.35l2.46-2.46C13.77,1.32,11.73,0,9.3,0C5.94,0,3.03,1.98,1.5,4.77l2.97,2.25C5.16,5.49,7.05,3.96,9.3,3.96z"></path></svg>
                Iniciar Sesión con Google
            </button>
        </div>

        <!-- Vista del Dashboard -->
        <div id="dashboard-view">
            <header class="dashboard-header">
                <h1>Dashboard de Clientes</h1>
                <button id="logout-btn" class="btn btn-secondary">Cerrar Sesión</button>
            </header>

            <section class="kpi-cards">
                <div class="kpi-card">
                    <i class="fas fa-users card-icon"></i>
                    <div class="card-title">Total de Clientes</div>
                    <div id="total-submissions" class="card-value">0</div>
                </div>
                <div class="kpi-card">
                    <i class="fas fa-calendar-week card-icon"></i>
                    <div class="card-title">Esta Semana</div>
                    <div id="weekly-submissions" class="card-value">0</div>
                </div>
                <div class="kpi-card">
                    <i class="fas fa-calendar-alt card-icon"></i>
                    <div class="card-title">Este Mes</div>
                    <div id="monthly-submissions" class="card-value">0</div>
                </div>
            </section>

            <section class="controls-panel">
                <div class="filter-group">
                    <label for="search-input">Buscar por Nombre o Email</label>
                    <input type="text" id="search-input" placeholder="Escribe para buscar...">
                </div>
                <div class="filter-group">
                    <label for="start-date">Fecha de Inicio</label>
                    <input type="date" id="start-date">
                </div>
                <div class="filter-group">
                    <label for="end-date">Fecha de Fin</label>
                    <input type="date" id="end-date">
                </div>
                <button id="filter-btn" class="btn btn-primary">Filtrar</button>
                <button id="reset-btn" class="btn btn-secondary">Limpiar</button>
                <button id="export-csv-btn" class="btn btn-primary export-btn"><i class="fas fa-file-csv"></i> Exportar a CSV</button>
            </section>

            <section class="table-container">
                <table class="submissions-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Teléfono</th>
                            <th>Servicio</th>
                            <th class="message-cell">Mensaje</th>
                        </tr>
                    </thead>
                    <tbody id="submissions-body">
                        <!-- Las filas se insertarán aquí -->
                    </tbody>
                </table>
                <div class="pagination-controls">
                    <button id="prev-page-btn" class="btn btn-secondary" disabled>Anterior</button>
                    <span id="page-info">Página 1</span>
                    <button id="next-page-btn" class="btn btn-secondary" disabled>Siguiente</button>
                </div>
            </section>
        </div>
    </div>

    <!-- Scripts de Firebase (versión 8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-remote-config.js"></script>

    <!-- Script del Dashboard -->
    <script src="dashboard.js"></script>
</body>
</html>
